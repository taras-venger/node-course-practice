"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Query = void 0;
const routing_controllers_1 = require("routing-controllers");
const utils_1 = require("../utils");
/**
 *
 * Allows to inject and validate a request query params to the controller action parameter.
 *
 * Must be applied on a controller action parameter.
 * @param type Override inferred type, set the expected type of the query
 * @param options [[routing-controllers]] param options for binding the request query
 * @param validatorOptions [[class-validator]] validation options for the validation to be performed.
 *
 * @category Decorator
 */
const Query = (options = {}, validatorOptions, type) => {
    return (target, propertyKey, parameterIndex) => {
        var _a;
        const mdType = type !== null && type !== void 0 ? type : (_a = Reflect.getMetadata('design:paramtypes', target, propertyKey)) === null || _a === void 0 ? void 0 : _a[parameterIndex];
        (0, routing_controllers_1.UseBefore)((0, utils_1.validationMiddleware)(mdType, 'query', validatorOptions))(target, propertyKey);
        (0, routing_controllers_1.QueryParams)({ validate: false, ...options })(target, propertyKey, parameterIndex);
    };
};
exports.Query = Query;
//# sourceMappingURL=query.decorator.js.map