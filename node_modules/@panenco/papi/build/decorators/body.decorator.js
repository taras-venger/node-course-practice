"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Body = void 0;
const routing_controllers_1 = require("routing-controllers");
const utils_1 = require("../utils");
/**
 *
 * Allows to inject and validate a request body value to the controller action parameter.
 *
 * Must be applied on a controller action parameter.
 * @param type Override inferred type, set the expected type of the body
 * @param bodyOptions `routing-controllers` body options for binding the request body
 * @param validatorOptions `class-validator` validation options for the validation to be performed.
 *
 * @category Decorator
 */
const Body = (bodyOptions, validatorOptions, type) => {
    return (target, propertyKey, parameterIndex) => {
        var _a;
        const mdType = type !== null && type !== void 0 ? type : (_a = Reflect.getMetadata('design:paramtypes', target, propertyKey)) === null || _a === void 0 ? void 0 : _a[parameterIndex];
        (0, routing_controllers_1.UseBefore)((0, utils_1.validationMiddleware)(mdType, 'body', validatorOptions, bodyOptions === null || bodyOptions === void 0 ? void 0 : bodyOptions.transform))(target, propertyKey);
        (0, routing_controllers_1.Body)({ type: mdType, validate: false, ...bodyOptions })(target, propertyKey, parameterIndex);
    };
};
exports.Body = Body;
//# sourceMappingURL=body.decorator.js.map