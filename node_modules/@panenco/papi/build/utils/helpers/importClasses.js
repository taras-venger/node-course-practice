"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.importClasses = void 0;
const glob_1 = require("glob");
const path_1 = __importDefault(require("path"));
/**
 * Import all classes within a list of directories (js files)
 * @param directories directories glob to scan for classes
 * @returns Array of class types
 *
 * @category Helpers
 */
const importClasses = (directories) => {
    const allFiles = directories.reduce((allDirs, dir) => {
        return allDirs.concat(glob_1.glob.sync(path_1.default.normalize(dir)));
    }, []);
    const dirs = allFiles.filter(file => file.endsWith('.js')).map(file => require(path_1.default.resolve(file)));
    return loadFileClasses(dirs, []);
};
exports.importClasses = importClasses;
const loadFileClasses = (exported, allLoaded) => {
    if (typeof exported === 'function') {
        allLoaded.push(exported);
    }
    else if (Array.isArray(exported)) {
        exported.forEach((i) => loadFileClasses(i, allLoaded));
    }
    else if (typeof exported === 'object' && exported !== null) {
        Object.keys(exported).forEach(key => loadFileClasses(exported[key], allLoaded));
    }
    return allLoaded;
};
//# sourceMappingURL=importClasses.js.map